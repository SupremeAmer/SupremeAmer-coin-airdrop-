<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SupremeAmer Wallet | Complete Crypto Ecosystem</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/appwrite@10.0.0"></script>
    <style>
        :root {
            --primary: #3c3c3d;
            --secondary: #f8b500;
            --accent: #e84118;
            --light: #f5f6fa;
            --dark: #2f3640;
            --success: #44bd32;
            --danger: #e84118;
            --card-bg: rgba(255, 255, 255, 0.95);
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo h1 {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(90deg, var(--secondary), #ffdd59);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .logo-icon {
            color: var(--secondary);
            font-size: 28px;
        }

        .network-indicator {
            background: var(--dark);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .network-indicator .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
        }

        /* Auth Section */
        .auth-section {
            background: var(--card-bg);
            color: var(--dark);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
        }

        .auth-section h2 {
            margin-bottom: 20px;
            font-size: 24px;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.05);
        }

        .auth-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .auth-tab.active {
            background: var(--secondary);
            color: var(--dark);
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            outline: none;
            font-size: 16px;
        }

        .form-group input:focus {
            border-color: var(--secondary);
        }

        /* Wallet Overview */
        .wallet-overview {
            background: var(--card-bg);
            color: var(--dark);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            text-align: center;
            position: relative;
        }

        .balance-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }

        .balance {
            font-size: 42px;
            font-weight: 700;
            margin: 0 10px;
            color: var(--dark);
        }

        .balance span {
            font-size: 18px;
            color: #777;
        }

        .balance-toggle {
            background: none;
            border: none;
            color: #777;
            cursor: pointer;
            font-size: 18px;
        }

        .wallet-address {
            background: rgba(0, 0, 0, 0.05);
            padding: 10px 15px;
            border-radius: 10px;
            font-family: monospace;
            margin: 15px 0;
            display: inline-block;
            cursor: pointer;
            transition: all 0.3s;
        }

        .wallet-address:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
        }

        .btn {
            padding: 12px 25px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--secondary);
            color: var(--dark);
        }

        .btn-primary:hover {
            background: #e6a700;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--dark);
            color: var(--light);
        }

        .btn-secondary:hover {
            background: #3d4450;
            transform: translateY(-2px);
        }

        /* Token List */
        .tokens-section {
            background: var(--card-bg);
            color: var(--dark);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-header h2 {
            font-size: 20px;
            font-weight: 700;
        }

        .token-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .token-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.03);
            transition: all 0.3s;
        }

        .token-item:hover {
            background: rgba(0, 0, 0, 0.06);
            transform: translateX(5px);
        }

        .token-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .token-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--dark);
        }

        .token-name {
            font-weight: 600;
        }

        .token-symbol {
            color: #777;
            font-size: 14px;
        }

        .token-balance {
            text-align: right;
        }

        .token-amount {
            font-weight: 600;
            font-size: 16px;
        }

        .token-value {
            color: #777;
            font-size: 14px;
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .feature-card {
            background: var(--card-bg);
            color: var(--dark);
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow);
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .feature-icon {
            font-size: 32px;
            margin-bottom: 15px;
            color: var(--secondary);
        }

        .feature-card h3 {
            margin-bottom: 10px;
            font-size: 18px;
        }

        .feature-card p {
            color: #777;
            font-size: 14px;
        }

        /* Transaction History */
        .transaction-history {
            background: var(--card-bg);
            color: var(--dark);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .transaction-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sent {
            color: var(--danger);
        }

        .received {
            color: var(--success);
        }

        .transaction-details h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .transaction-details p {
            color: #777;
            font-size: 14px;
        }

        .transaction-amount {
            font-weight: 600;
        }

        /* Live Chat */
        .live-chat {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .chat-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--secondary);
            color: var(--dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        .chat-toggle:hover {
            transform: scale(1.1);
        }

        .chat-window {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 350px;
            height: 450px;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            background: var(--dark);
            color: var(--light);
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            font-size: 14px;
        }

        .message.user {
            align-self: flex-end;
            background: var(--secondary);
            color: var(--dark);
            border-bottom-right-radius: 5px;
        }

        .message.bot {
            align-self: flex-start;
            background: rgba(0, 0, 0, 0.05);
            color: var(--dark);
            border-bottom-left-radius: 5px;
        }

        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 20px;
            outline: none;
        }

        .chat-input button {
            margin-left: 10px;
            background: var(--secondary);
            color: var(--dark);
            border: none;
            border-radius: 20px;
            padding: 0 20px;
            cursor: pointer;
            font-weight: 600;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--card-bg);
            color: var(--dark);
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            font-size: 22px;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #777;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            outline: none;
            font-size: 16px;
        }

        .form-group input:focus {
            border-color: var(--secondary);
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 25px;
        }

        /* Status Messages */
        .status-message {
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: none;
        }

        .status-success {
            background: rgba(68, 189, 50, 0.1);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status-error {
            background: rgba(232, 65, 24, 0.1);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        /* Buy/Sell Section */
        .trade-section {
            background: var(--card-bg);
            color: var(--dark);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
        }

        .trade-tabs {
            display: flex;
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.05);
        }

        .trade-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .trade-tab.active {
            background: var(--secondary);
            color: var(--dark);
        }

        .fee-info {
            background: rgba(0, 0, 0, 0.03);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 14px;
        }

        /* Mining Dashboard Styles */
        .mining-container {
            background: var(--card-bg);
            color: var(--dark);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .mining-header {
            font-size: 1.6em;
            color: var(--secondary);
            margin-bottom: 20px;
            font-weight: 700;
        }

        .mined-coins {
            font-size: 2.5em;
            margin: 20px 0;
            color: var(--secondary);
            font-weight: 800;
            letter-spacing: 1px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .mining-timer {
            font-size: 1.6em;
            color: var(--accent);
            margin-bottom: 20px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            padding: 8px 15px;
            border-radius: 10px;
            background: rgba(255, 51, 51, 0.1);
            display: inline-block;
        }

        .mining-timer:hover {
            background: rgba(255, 51, 51, 0.2);
            transform: scale(1.05);
        }

        .mining-btn {
            padding: 16px 40px;
            background: linear-gradient(90deg, var(--secondary) 40%, var(--primary) 100%);
            color: #111;
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 20px rgba(255, 152, 0, 0.4);
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .mining-btn:hover {
            background: linear-gradient(90deg, var(--primary) 40%, var(--secondary) 100%);
            box-shadow: 0 8px 25px rgba(255, 152, 0, 0.6);
            transform: translateY(-3px);
        }

        .mining-btn:active {
            transform: translateY(0);
        }

        .mining-stats {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 15px;
        }

        .mining-stat {
            flex: 1;
            min-width: 120px;
            text-align: center;
            padding: 15px 10px;
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
        }

        .mining-stat:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .mining-stat-value {
            font-size: 1.6em;
            font-weight: bold;
            color: var(--secondary);
            margin-bottom: 5px;
        }

        .mining-stat-label {
            font-size: 0.9em;
            color: #777;
            font-weight: 600;
        }

        .mining-progress-container {
            width: 100%;
            height: 12px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .mining-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--primary));
            border-radius: 10px;
            transition: width 0.5s;
            box-shadow: 0 0 10px rgba(255, 152, 0, 0.5);
        }

        .mining-session-info {
            background: rgba(0, 0, 0, 0.03);
            padding: 15px 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            border-left: 5px solid var(--primary);
        }

        .session-status {
            font-weight: bold;
            color: var(--secondary);
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .mining-status {
            margin: 7px 0 0 0;
            color: var(--secondary);
            font-size: 0.97em;
            min-height: 18px;
            transition: all 0.3s;
        }

        .success-message {
            color: #4CAF50;
            font-weight: bold;
        }

        .error-message {
            color: var(--accent);
            font-weight: bold;
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 12px;
            height: 12px;
            background-color: #f00;
            opacity: 0;
            z-index: 2001;
            animation: confetti-fall 3s linear forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .action-buttons {
                flex-direction: column;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .chat-window {
                width: 300px;
            }
            
            .mining-stats {
                flex-direction: column;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-wallet logo-icon"></i>
                <h1>SupremeAmer Wallet</h1>
            </div>
            <div class="network-indicator">
                <div class="dot"></div>
                <span>BNB Smart Chain</span>
            </div>
        </header>

        <!-- Authentication Section -->
        <section class="auth-section" id="authSection">
            <h2>Welcome to SupremeAmer Wallet</h2>
            <div class="auth-tabs">
                <div class="auth-tab active" id="loginTab">Login</div>
                <div class="auth-tab" id="registerTab">Register</div>
            </div>
            
            <div id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password">
                </div>
                <button class="btn btn-primary" id="loginBtn" style="width: 100%;">Login</button>
            </div>
            
            <div id="registerForm" class="hidden">
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" placeholder="Create a password">
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" placeholder="Confirm your password">
                </div>
                <button class="btn btn-primary" id="registerBtn" style="width: 100%;">Create Wallet</button>
            </div>
            
            <div class="status-message" id="authStatus"></div>
        </section>

        <!-- Wallet Dashboard (Initially Hidden) -->
        <div id="walletDashboard" class="hidden">
            <section class="wallet-overview">
                <p>Total Balance</p>
                <div class="balance-container">
                    <button class="balance-toggle" id="balanceToggle">
                        <i class="fas fa-eye"></i>
                    </button>
                    <div class="balance">$<span id="totalBalance">0.00</span> <span>USD</span></div>
                </div>
                <div class="wallet-address" id="walletAddress">
                    Loading...
                </div>
                <div class="action-buttons">
                    <button class="btn btn-primary" id="sendBtn">
                        <i class="fas fa-paper-plane"></i> Send
                    </button>
                    <button class="btn btn-primary" id="receiveBtn">
                        <i class="fas fa-qrcode"></i> Receive
                    </button>
                    <button class="btn btn-secondary" id="buyBtn">
                        <i class="fas fa-shopping-cart"></i> Buy
                    </button>
                    <button class="btn btn-secondary" id="sellBtn">
                        <i class="fas fa-dollar-sign"></i> Sell
                    </button>
                </div>
            </section>

            <!-- Mining Dashboard -->
            <section class="mining-container" id="miningDashboard">
                <div class="mining-header">SupremeAmer Mining</div>
                
                <div class="mined-coins" id="minedCoins">0 SA</div>
                
                <!-- Session Info -->
                <div class="mining-session-info">
                    <div class="session-status" id="sessionStatus">Ready to start mining</div>
                    <div id="sessionTime">Session: 00:00:00 / 07:00:00</div>
                </div>
                
                <!-- Stats Panel -->
                <div class="mining-stats">
                    <div class="mining-stat">
                        <div class="mining-stat-value" id="miningRate">0.0002</div>
                        <div class="mining-stat-label">SA/sec</div>
                    </div>
                    <div class="mining-stat">
                        <div class="mining-stat-value" id="sessionProgress">0%</div>
                        <div class="mining-stat-label">Progress</div>
                    </div>
                    <div class="mining-stat">
                        <div class="mining-stat-value" id="multiplier">1x</div>
                        <div class="mining-stat-label">Multiplier</div>
                    </div>
                </div>
                
                <!-- Progress Bar -->
                <div class="mining-progress-container">
                    <div class="mining-progress-bar" id="miningProgress"></div>
                </div>
                
                <div class="mining-timer" id="miningTimer">07:00:00</div>
                
                <button class="mining-btn" id="mineBtn">
                    <i class="fas fa-play"></i>
                    <span id="mineBtnText">Start Mining</span>
                </button>
                
                <button class="mining-btn" id="upgradeMiningBtn">
                    <i class="fas fa-bolt"></i>
                    <span>Upgrade Mining</span>
                </button>
                
                <button class="mining-btn" id="withdrawMiningBtn">
                    <i class="fas fa-wallet"></i>
                    <span>Withdraw (Min: 50,000 SA)</span>
                </button>
                
                <div class="mining-status" id="claimStatus"></div>
                <div class="mining-status" id="withdrawStatus"></div>
            </section>

            <section class="tokens-section">
                <div class="section-header">
                    <h2>Your Tokens</h2>
                    <button class="btn btn-secondary" id="addTokenBtn">
                        <i class="fas fa-plus"></i> Add Token
                    </button>
                </div>
                <div class="token-list" id="tokenList">
                    <!-- Tokens will be loaded here -->
                </div>
            </section>

            <div class="features-grid">
                <div class="feature-card" id="affiliateBtn">
                    <div class="feature-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Affiliate Network</h3>
                    <p>Join our affiliate program and earn commissions</p>
                </div>
                <div class="feature-card" id="ideBtn">
                    <div class="feature-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <h3>SupremeAmer IDE</h3>
                    <p>Develop and deploy smart contracts easily</p>
                </div>
                <div class="feature-card" id="suplayBtn">
                    <div class="feature-icon">
                        <i class="fas fa-box-open"></i>
                    </div>
                    <h3>SUPLAY</h3>
                    <p>Decentralized marketplace for digital goods</p>
                </div>
                <div class="feature-card" id="saculatorBtn">
                    <div class="feature-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <h3>Saculator</h3>
                    <p>Advanced crypto calculator and analytics</p>
                </div>
                <div class="feature-card" id="motiveBtn">
                    <div class="feature-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <h3>Supreme-Motive</h3>
                    <p>Goal setting and achievement platform</p>
                </div>
            </div>

            <section class="transaction-history">
                <div class="section-header">
                    <h2>Recent Transactions</h2>
                    <button class="btn btn-secondary" id="viewAllTxBtn">View All</button>
                </div>
                <div class="transaction-list" id="transactionList">
                    <!-- Transactions will be loaded here -->
                </div>
            </section>
        </div>
    </div>

    <!-- Live Chat -->
    <div class="live-chat">
        <div class="chat-toggle" id="chatToggle">
            <i class="fas fa-comments"></i>
        </div>
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <h3>Live Support</h3>
                <button id="closeChat"><i class="fas fa-times"></i></button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message bot">
                    Hello! How can we help you today?
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Type your message...">
                <button id="sendMessage">Send</button>
            </div>
        </div>
    </div>

    <!-- Send Modal -->
    <div class="modal" id="sendModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Send Tokens</h2>
                <button class="close-modal" id="closeSendModal">&times;</button>
            </div>
            <div class="form-group">
                <label for="recipient">Recipient Address</label>
                <input type="text" id="recipient" placeholder="0x...">
            </div>
            <div class="form-group">
                <label for="tokenSelect">Token</label>
                <select id="tokenSelect">
                    <option value="bnb">BNB</option>
                    <option value="cake">CAKE</option>
                    <option value="busd">BUSD</option>
                    <option value="safe">SAFE</option>
                </select>
            </div>
            <div class="form-group">
                <label for="amount">Amount</label>
                <input type="text" id="amount" placeholder="0.00">
            </div>
            <div class="status-message" id="sendStatus"></div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelSend">Cancel</button>
                <button class="btn btn-primary" id="confirmSend">Send</button>
            </div>
        </div>
    </div>

    <!-- Receive Modal -->
    <div class="modal" id="receiveModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Receive Tokens</h2>
                <button class="close-modal" id="closeReceiveModal">&times;</button>
            </div>
            <div style="text-align: center; padding: 20px 0;">
                <div style="background: #fff; padding: 20px; display: inline-block; border-radius: 10px;">
                    <!-- QR Code Placeholder -->
                    <div style="width: 200px; height: 200px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #777;">
                        QR Code
                    </div>
                </div>
                <p style="margin-top: 20px; font-weight: 600;">Scan to receive funds</p>
                <div class="wallet-address" id="receiveAddress" style="margin-top: 15px;">
                    Loading...
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" id="copyAddress">Copy Address</button>
            </div>
        </div>
    </div>

    <!-- Buy Modal -->
    <div class="modal" id="buyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Buy Tokens</h2>
                <button class="close-modal" id="closeBuyModal">&times;</button>
            </div>
            <div class="trade-tabs">
                <div class="trade-tab active" id="buyTab">Buy</div>
                <div class="trade-tab" id="sellTab">Sell</div>
            </div>
            <div class="form-group">
                <label for="buyToken">Token to Buy</label>
                <select id="buyToken">
                    <option value="bnb">BNB</option>
                    <option value="cake">CAKE</option>
                    <option value="busd">BUSD</option>
                    <option value="safe">SAFE</option>
                </select>
            </div>
            <div class="form-group">
                <label for="buyAmount">Amount (USD)</label>
                <input type="text" id="buyAmount" placeholder="0.00">
            </div>
            <div class="fee-info">
                <p><strong>Transaction Details:</strong></p>
                <p>Buy Amount: $<span id="buyAmountDisplay">0.00</span></p>
                <p>Buy Fee (0.8%): $<span id="buyFee">0.00</span></p>
                <p>Total Cost: $<span id="buyTotal">0.00</span></p>
                <p>You'll receive: <span id="buyTokens">0.00</span> <span id="buyTokenSymbol">BNB</span></p>
            </div>
            <div class="status-message" id="buyStatus"></div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelBuy">Cancel</button>
                <button class="btn btn-primary" id="confirmBuy">Buy Now</button>
            </div>
        </div>
    </div>

    <!-- Sell Modal -->
    <div class="modal" id="sellModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Sell Tokens</h2>
                <button class="close-modal" id="closeSellModal">&times;</button>
            </div>
            <div class="form-group">
                <label for="sellToken">Token to Sell</label>
                <select id="sellToken">
                    <option value="bnb">BNB</option>
                    <option value="cake">CAKE</option>
                    <option value="busd">BUSD</option>
                    <option value="safe">SAFE</option>
                </select>
            </div>
            <div class="form-group">
                <label for="sellAmount">Amount</label>
                <input type="text" id="sellAmount" placeholder="0.00">
            </div>
            <div class="fee-info">
                <p><strong>Transaction Details:</strong></p>
                <p>Sell Amount: <span id="sellAmountDisplay">0.00</span> <span id="sellTokenSymbol">BNB</span></p>
                <p>Sell Fee (9%): <span id="sellFee">0.00</span> <span id="sellFeeSymbol">BNB</span></p>
                <p>You'll receive: $<span id="sellTotal">0.00</span></p>
            </div>
            <div class="status-message" id="sellStatus"></div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelSell">Cancel</button>
                <button class="btn btn-primary" id="confirmSell">Sell Now</button>
            </div>
        </div>
    </div>

    <!-- Add Token Modal -->
    <div class="modal" id="addTokenModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Token</h2>
                <button class="close-modal" id="closeAddTokenModal">&times;</button>
            </div>
            <div class="form-group">
                <label for="tokenContract">Token Contract Address</label>
                <input type="text" id="tokenContract" placeholder="0x...">
                <button class="btn btn-secondary" id="fetchToken" style="margin-top: 10px; width: 100%;">Fetch Token Details</button>
            </div>
            <div class="form-group">
                <label for="tokenName">Token Name</label>
                <input type="text" id="tokenName" placeholder="Token Name">
            </div>
            <div class="form-group">
                <label for="tokenSymbol">Token Symbol</label>
                <input type="text" id="tokenSymbol" placeholder="SYMBOL">
            </div>
            <div class="form-group">
                <label for="tokenDecimals">Decimals</label>
                <input type="number" id="tokenDecimals" placeholder="18" value="18">
            </div>
            <div class="status-message" id="addTokenStatus"></div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelAddToken">Cancel</button>
                <button class="btn btn-primary" id="confirmAddToken">Add Token</button>
            </div>
        </div>
    </div>

    <!-- Mining Upgrade Modal -->
    <div class="modal" id="miningUpgradeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Upgrade Mining Speed</h2>
                <button class="close-modal" id="closeMiningUpgradeModal">&times;</button>
            </div>
            
            <div style="background: rgba(0, 0, 0, 0.03); padding: 20px; border-radius: 15px; margin: 20px 0; border-left: 5px solid var(--secondary);">
                <h3 style="color: var(--secondary); margin-bottom: 10px;">🚀 0.05 SA/sec</h3>
                <p style="margin-bottom: 15px;">Duration: <b>360 days</b> <br> Fee: <b>0.002 BNB</b> <br> Claim every 30 days</p>
                <button class="btn btn-primary" onclick="upgradeMining('0.05')" style="width: 100%;">
                    <i class="fas fa-bolt"></i> Upgrade
                </button>
            </div>
            
            <div style="background: rgba(0, 0, 0, 0.03); padding: 20px; border-radius: 15px; margin: 20px 0; border-left: 5px solid var(--secondary);">
                <h3 style="color: var(--secondary); margin-bottom: 10px;">🔥 0.1 SA/sec</h3>
                <p style="margin-bottom: 15px;">Duration: <b>360 days</b> <br> Fee: <b>0.009 BNB</b> <br> Claim every 30 days</p>
                <button class="btn btn-primary" onclick="upgradeMining('0.1')" style="width: 100%;">
                    <i class="fas fa-fire"></i> Upgrade
                </button>
            </div>
            
            <div style="font-size:0.95em;color:#666;margin-top:15px; line-height:1.5;">
               After upgrade, mining speed increases for 360 days. You can claim mined rewards every 30 days. Mining continues even if you delay claim, but only for 360 days.
            </div>
        </div>
    </div>

    <!-- Confetti Container -->
    <div id="confettiContainer"></div>

    <script>
        // ---- CONFIGURATION ----
        const APPWRITE_ENDPOINT = 'https://fra.cloud.appwrite.io/v1';
        const APPWRITE_PROJECT = '6839d9640019316a160d';
        const APPWRITE_DB_ID = '6839dcca000190bf99f6';
        const APPWRITE_COLLECTION_ID = 'users';
        const SUPREMEAMER_RECEIVER_BNB = '0xYourBnbAddressHere'; // CHANGE TO YOURS

        const UPGRADE_FEES = {
            "0.05": "0.002",
            "0.1": "0.009"
        };
        const UPGRADE_SPEEDS = {
            "0.05": 0.05,
            "0.1": 0.1
        };
        const NORMAL_SPEED = 0.0002;
        const UPGRADE_DURATION = 360 * 24 * 3600;
        const CLAIM_INTERVAL = 30 * 24 * 3600;
        const WITHDRAW_ELIGIBILITY_FEE_BNB = "0.0017";
        const WITHDRAW_MIN_SA = 50000;
        const WITHDRAW_FEE_PERCENT = 6;
        const WITHDRAW_DAYS = [9, 13];

        // Appwrite
        const { Client, Account, Databases, Query } = Appwrite;
        const client = new Client().setEndpoint(APPWRITE_ENDPOINT).setProject(APPWRITE_PROJECT);
        const account = new Account(client);
        const databases = new Databases(client);

        // DOM Elements
        const authSection = document.getElementById('authSection');
        const walletDashboard = document.getElementById('walletDashboard');
        const loginTab = document.getElementById('loginTab');
        const registerTab = document.getElementById('registerTab');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const loginBtn = document.getElementById('loginBtn');
        const registerBtn = document.getElementById('registerBtn');
        const authStatus = document.getElementById('authStatus');
        
        const sendBtn = document.getElementById('sendBtn');
        const receiveBtn = document.getElementById('receiveBtn');
        const buyBtn = document.getElementById('buyBtn');
        const sellBtn = document.getElementById('sellBtn');
        
        const sendModal = document.getElementById('sendModal');
        const receiveModal = document.getElementById('receiveModal');
        const buyModal = document.getElementById('buyModal');
        const sellModal = document.getElementById('sellModal');
        const addTokenModal = document.getElementById('addTokenModal');
        const miningUpgradeModal = document.getElementById('miningUpgradeModal');
        
        const closeSendModal = document.getElementById('closeSendModal');
        const closeReceiveModal = document.getElementById('closeReceiveModal');
        const closeBuyModal = document.getElementById('closeBuyModal');
        const closeSellModal = document.getElementById('closeSellModal');
        const closeAddTokenModal = document.getElementById('closeAddTokenModal');
        const closeMiningUpgradeModal = document.getElementById('closeMiningUpgradeModal');
        
        const cancelSend = document.getElementById('cancelSend');
        const cancelBuy = document.getElementById('cancelBuy');
        const cancelSell = document.getElementById('cancelSell');
        const cancelAddToken = document.getElementById('cancelAddToken');
        
        const confirmSend = document.getElementById('confirmSend');
        const confirmBuy = document.getElementById('confirmBuy');
        const confirmSell = document.getElementById('confirmSell');
        const confirmAddToken = document.getElementById('confirmAddToken');
        
        const copyAddress = document.getElementById('copyAddress');
        const walletAddress = document.getElementById('walletAddress');
        const receiveAddress = document.getElementById('receiveAddress');
        
        const tokenList = document.getElementById('tokenList');
        const transactionList = document.getElementById('transactionList');
        const totalBalance = document.getElementById('totalBalance');
        const balanceToggle = document.getElementById('balanceToggle');
        
        const addTokenBtn = document.getElementById('addTokenBtn');
        const fetchTokenBtn = document.getElementById('fetchToken');
        const tokenContract = document.getElementById('tokenContract');
        const tokenName = document.getElementById('tokenName');
        const tokenSymbol = document.getElementById('tokenSymbol');
        const tokenDecimals = document.getElementById('tokenDecimals');
        
        const buyTab = document.getElementById('buyTab');
        const sellTab = document.getElementById('sellTab');
        const buyAmount = document.getElementById('buyAmount');
        const sellAmount = document.getElementById('sellAmount');
        const buyToken = document.getElementById('buyToken');
        const sellToken = document.getElementById('sellToken');
        
        // Mining elements
        const mineBtn = document.getElementById('mineBtn');
        const upgradeMiningBtn = document.getElementById('upgradeMiningBtn');
        const withdrawMiningBtn = document.getElementById('withdrawMiningBtn');
        const minedCoinsElement = document.getElementById('minedCoins');
        const miningTimer = document.getElementById('miningTimer');
        const miningRate = document.getElementById('miningRate');
        const sessionProgress = document.getElementById('sessionProgress');
        const multiplier = document.getElementById('multiplier');
        const miningProgress = document.getElementById('miningProgress');
        const sessionStatus = document.getElementById('sessionStatus');
        const sessionTime = document.getElementById('sessionTime');
        const claimStatus = document.getElementById('claimStatus');
        const withdrawStatus = document.getElementById('withdrawStatus');

        // Feature buttons
        const affiliateBtn = document.getElementById('affiliateBtn');
        const ideBtn = document.getElementById('ideBtn');
        const suplayBtn = document.getElementById('suplayBtn');
        const saculatorBtn = document.getElementById('saculatorBtn');
        const motiveBtn = document.getElementById('motiveBtn');

        // Chat Elements
        const chatToggle = document.getElementById('chatToggle');
        const chatWindow = document.getElementById('chatWindow');
        const closeChat = document.getElementById('closeChat');
        const chatInput = document.getElementById('chatInput');
        const sendMessage = document.getElementById('sendMessage');
        const chatMessages = document.getElementById('chatMessages');

        // State
        let isLoggedIn = false;
        let currentUser = null;
        let userWallet = null;
        let balanceHidden = false;

        // Mining state
        let minedCoins = 0;
        let miningActive = false;
        let miningStartTime = 0;
        let miningSpeed = NORMAL_SPEED;
        let miningMultiplier = 1;
        let sessionDuration = 7 * 60 * 60; // 7 hours in seconds
        let miningInterval;

        // Upgrade state
        let miningUpgrade = null;
        let upgradeActive = false;

        // Token prices (simulated)
        const tokenPrices = {
            bnb: 395.07,
            cake: 3.21,
            busd: 1.00,
            safe: 0.0805
        };

        // Event Listeners
        loginTab.addEventListener('click', () => {
            loginTab.classList.add('active');
            registerTab.classList.remove('active');
            loginForm.classList.remove('hidden');
            registerForm.classList.add('hidden');
        });

        registerTab.addEventListener('click', () => {
            registerTab.classList.add('active');
            loginTab.classList.remove('active');
            registerForm.classList.remove('hidden');
            loginForm.classList.add('hidden');
        });

        loginBtn.addEventListener('click', handleLogin);
        registerBtn.addEventListener('click', handleRegister);

        sendBtn.addEventListener('click', () => {
            sendModal.style.display = 'flex';
        });

        receiveBtn.addEventListener('click', () => {
            receiveAddress.textContent = userWallet.address;
            receiveModal.style.display = 'flex';
        });

        buyBtn.addEventListener('click', () => {
            buyModal.style.display = 'flex';
            updateBuyDetails();
        });

        sellBtn.addEventListener('click', () => {
            sellModal.style.display = 'flex';
            updateSellDetails();
        });

        addTokenBtn.addEventListener('click', () => {
            addTokenModal.style.display = 'flex';
        });

        upgradeMiningBtn.addEventListener('click', () => {
            miningUpgradeModal.style.display = 'flex';
        });

        affiliateBtn.addEventListener('click', () => {
            window.open('https://supremeamer.com/affiliate', '_blank');
        });

        ideBtn.addEventListener('click', () => {
            window.open('https://supremeamer.com/ide', '_blank');
        });

        suplayBtn.addEventListener('click', () => {
            window.open('https://supremeamer.com/suplay', '_blank');
        });

        saculatorBtn.addEventListener('click', () => {
            window.open('https://supremeamer.com/saculator', '_blank');
        });

        motiveBtn.addEventListener('click', () => {
            window.open('https://supremeamer.com/motive', '_blank');
        });

        // Close modals
        closeSendModal.addEventListener('click', () => {
            sendModal.style.display = 'none';
        });

        closeReceiveModal.addEventListener('click', () => {
            receiveModal.style.display = 'none';
        });

        closeBuyModal.addEventListener('click', () => {
            buyModal.style.display = 'none';
        });

        closeSellModal.addEventListener('click', () => {
            sellModal.style.display = 'none';
        });

        closeAddTokenModal.addEventListener('click', () => {
            addTokenModal.style.display = 'none';
        });

        closeMiningUpgradeModal.addEventListener('click', () => {
            miningUpgradeModal.style.display = 'none';
        });

        cancelSend.addEventListener('click', () => {
            sendModal.style.display = 'none';
        });

        cancelBuy.addEventListener('click', () => {
            buyModal.style.display = 'none';
        });

        cancelSell.addEventListener('click', () => {
            sellModal.style.display = 'none';
        });

        cancelAddToken.addEventListener('click', () => {
            addTokenModal.style.display = 'none';
        });

        // Confirm actions
        confirmSend.addEventListener('click', handleSend);
        confirmBuy.addEventListener('click', handleBuy);
        confirmSell.addEventListener('click', handleSell);
        confirmAddToken.addEventListener('click', handleAddToken);

        // Copy wallet address
        copyAddress.addEventListener('click', () => {
            navigator.clipboard.writeText(userWallet.address);
            showStatus(authStatus, 'Address copied to clipboard!', 'success');
        });

        // Balance toggle
        balanceToggle.addEventListener('click', toggleBalanceVisibility);

        // Fetch token details
        fetchTokenBtn.addEventListener('click', fetchTokenDetails);

        // Update buy/sell details when inputs change
        buyAmount.addEventListener('input', updateBuyDetails);
        buyToken.addEventListener('change', updateBuyDetails);
        sellAmount.addEventListener('input', updateSellDetails);
        sellToken.addEventListener('change', updateSellDetails);

        // Buy/Sell tab switching
        buyTab.addEventListener('click', () => {
            buyTab.classList.add('active');
            sellTab.classList.remove('active');
            buyModal.style.display = 'flex';
            sellModal.style.display = 'none';
        });

        sellTab.addEventListener('click', () => {
            sellTab.classList.add('active');
            buyTab.classList.remove('active');
            sellModal.style.display = 'flex';
            buyModal.style.display = 'none';
        });

        // Mining functionality
        mineBtn.addEventListener('click', toggleMining);
        withdrawMiningBtn.addEventListener('click', handleWithdraw);
        miningTimer.addEventListener('click', handleClaim);

        // Chat functionality
        chatToggle.addEventListener('click', () => {
            chatWindow.style.display = 'flex';
        });

        closeChat.addEventListener('click', () => {
            chatWindow.style.display = 'none';
        });

        sendMessage.addEventListener('click', sendChatMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendChatMessage();
            }
        });

        // Appwrite Functions
        async function createUser(email, password, userData) {
            try {
                // Create Appwrite account
                const user = await account.create('unique()', email, password);
                
                // Create user document in database
                const document = await databases.createDocument(
                    APPWRITE_DB_ID,
                    APPWRITE_COLLECTION_ID,
                    'unique()',
                    {
                        email: email,
                        userId: user.$id,
                        wallet: userData
                    }
                );
                
                return { user, document };
            } catch (error) {
                console.error('Error creating user:', error);
                throw error;
            }
        }

        async function loginUser(email, password) {
            try {
                const session = await account.createEmailSession(email, password);
                return session;
            } catch (error) {
                console.error('Error logging in:', error);
                throw error;
            }
        }

        async function getUserData() {
            try {
                const user = await account.get();
                const documents = await databases.listDocuments(
                    APPWRITE_DB_ID,
                    APPWRITE_COLLECTION_ID,
                    [Query.equal('userId', user.$id)]
                );
                
                if (documents.documents.length > 0) {
                    return documents.documents[0];
                }
                return null;
            } catch (error) {
                console.error('Error fetching user data:', error);
                throw error;
            }
        }

        async function updateUserData(data) {
            try {
                const user = await account.get();
                const documents = await databases.listDocuments(
                    APPWRITE_DB_ID,
                    APPWRITE_COLLECTION_ID,
                    [Query.equal('userId', user.$id)]
                );
                
                if (documents.documents.length > 0) {
                    const document = await databases.updateDocument(
                        APPWRITE_DB_ID,
                        APPWRITE_COLLECTION_ID,
                        documents.documents[0].$id,
                        { wallet: data }
                    );
                    return document;
                }
                return null;
            } catch (error) {
                console.error('Error updating user data:', error);
                throw error;
            }
        }

        // Functions
        async function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showStatus(authStatus, 'Please fill in all fields', 'error');
                return;
            }
            
            try {
                await loginUser(email, password);
                const userData = await getUserData();
                
                if (userData) {
                    currentUser = email;
                    userWallet = userData.wallet;
                    isLoggedIn = true;
                    
                    // Initialize mining data for user if not exists
                    if (!userWallet.mining) {
                        userWallet.mining = {
                            minedCoins: 0,
                            miningActive: false,
                            miningStartTime: 0,
                            miningSpeed: NORMAL_SPEED,
                            miningMultiplier: 1,
                            miningUpgrade: null,
                            upgradeActive: false
                        };
                        await updateUserData(userWallet);
                    }
                    
                    // Load mining data
                    minedCoins = userWallet.mining.minedCoins;
                    miningActive = userWallet.mining.miningActive;
                    miningStartTime = userWallet.mining.miningStartTime;
                    miningSpeed = userWallet.mining.miningSpeed;
                    miningMultiplier = userWallet.mining.miningMultiplier;
                    miningUpgrade = userWallet.mining.miningUpgrade;
                    upgradeActive = userWallet.mining.upgradeActive;
                    
                    showStatus(authStatus, 'Login successful!', 'success');
                    setTimeout(() => {
                        authSection.classList.add('hidden');
                        walletDashboard.classList.remove('hidden');
                        loadWalletData();
                        updateMiningUI();
                        
                        // Resume mining if active
                        if (miningActive) {
                            resumeMining();
                        }
                    }, 1000);
                } else {
                    showStatus(authStatus, 'User data not found', 'error');
                }
            } catch (error) {
                showStatus(authStatus, 'Invalid email or password', 'error');
            }
        }

        async function handleRegister() {
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!email || !password || !confirmPassword) {
                showStatus(authStatus, 'Please fill in all fields', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showStatus(authStatus, 'Passwords do not match', 'error');
                return;
            }
            
            try {
                // Generate a new wallet
                const newWallet = {
                    address: '0x' + Math.random().toString(16).substr(2, 40),
                    privateKey: 'encrypted_' + Math.random().toString(36).substr(2, 50),
                    tokens: {
                        bnb: { balance: 2.5, value: 987.65 },
                        cake: { balance: 45.82, value: 147.08 },
                        busd: { balance: 1250.75, value: 1250.75 },
                        safe: { balance: 10000, value: 805.00 }
                    },
                    transactions: [],
                    mining: {
                        minedCoins: 0,
                        miningActive: false,
                        miningStartTime: 0,
                        miningSpeed: NORMAL_SPEED,
                        miningMultiplier: 1,
                        miningUpgrade: null,
                        upgradeActive: false
                    }
                };
                
                await createUser(email, password, newWallet);
                
                showStatus(authStatus, 'Wallet created successfully!', 'success');
                setTimeout(() => {
                    // Switch to login tab
                    loginTab.click();
                    document.getElementById('loginEmail').value = email;
                }, 1500);
            } catch (error) {
                if (error.message.includes('already exists')) {
                    showStatus(authStatus, 'User already exists', 'error');
                } else {
                    showStatus(authStatus, 'Error creating account', 'error');
                }
            }
        }

        function loadWalletData() {
            if (!userWallet) return;
            
            // Update wallet address
            walletAddress.textContent = userWallet.address;
            
            // Calculate total balance
            updateTotalBalance();
            
            // Load tokens
            tokenList.innerHTML = '';
            for (const [token, data] of Object.entries(userWallet.tokens)) {
                const tokenItem = document.createElement('div');
                tokenItem.className = 'token-item';
                
                let tokenName, tokenSymbol, tokenIcon;
                switch(token) {
                    case 'bnb':
                        tokenName = 'BNB';
                        tokenSymbol = 'Binance Coin';
                        tokenIcon = 'BNB';
                        break;
                    case 'cake':
                        tokenName = 'PancakeSwap';
                        tokenSymbol = 'CAKE';
                        tokenIcon = 'CAKE';
                        break;
                    case 'busd':
                        tokenName = 'Binance USD';
                        tokenSymbol = 'BUSD';
                        tokenIcon = 'BUSD';
                        break;
                    case 'safe':
                        tokenName = 'SupremeAmer';
                        tokenSymbol = 'SAFE';
                        tokenIcon = 'SAFE';
                        break;
                    default:
                        tokenName = data.name || 'Unknown';
                        tokenSymbol = data.symbol || 'UNK';
                        tokenIcon = data.symbol || 'TKN';
                }
                
                tokenItem.innerHTML = `
                    <div class="token-info">
                        <div class="token-icon" style="background: ${getTokenColor(token)};">${tokenIcon}</div>
                        <div>
                            <div class="token-name">${tokenName}</div>
                            <div class="token-symbol">${tokenSymbol}</div>
                        </div>
                    </div>
                    <div class="token-balance">
                        <div class="token-amount">${formatBalance(data.balance)} ${token.toUpperCase()}</div>
                        <div class="token-value">$${formatBalance(data.value)}</div>
                    </div>
                `;
                
                tokenList.appendChild(tokenItem);
            }
            
            // Load transactions
            transactionList.innerHTML = '';
            if (userWallet.transactions.length === 0) {
                transactionList.innerHTML = '<p style="text-align: center; color: #777; padding: 20px;">No transactions yet</p>';
            } else {
                userWallet.transactions.forEach(tx => {
                    const txItem = document.createElement('div');
                    txItem.className = 'transaction-item';
                    
                    let txType, txIcon, txDesc;
                    if (tx.type === 'sent') {
                        txType = 'sent';
                        txIcon = 'arrow-up';
                        txDesc = `To: ${tx.address}`;
                    } else if (tx.type === 'received') {
                        txType = 'received';
                        txIcon = 'arrow-down';
                        txDesc = `From: ${tx.address}`;
                    } else if (tx.type === 'buy') {
                        txType = 'received';
                        txIcon = 'shopping-cart';
                        txDesc = `Buy ${tx.token.toUpperCase()}`;
                    } else if (tx.type === 'sell') {
                        txType = 'sent';
                        txIcon = 'dollar-sign';
                        txDesc = `Sell ${tx.token.toUpperCase()}`;
                    }
                    
                    txItem.innerHTML = `
                        <div class="transaction-info">
                            <div class="transaction-icon ${txType}">
                                <i class="fas fa-${txIcon}"></i>
                            </div>
                            <div class="transaction-details">
                                <h4>${tx.type === 'sent' ? 'Sent' : tx.type === 'received' ? 'Received' : tx.type === 'buy' ? 'Buy' : 'Sell'} ${tx.token.toUpperCase()}</h4>
                                <p>${txDesc}</p>
                            </div>
                        </div>
                        <div class="transaction-amount ${txType}">${tx.type === 'sent' || tx.type === 'sell' ? '-' : '+'}${tx.amount} ${tx.token.toUpperCase()}</div>
                    `;
                    
                    transactionList.appendChild(txItem);
                });
            }
        }

        function updateTotalBalance() {
            let total = 0;
            for (const token in userWallet.tokens) {
                total += userWallet.tokens[token].value;
            }
            
            if (balanceHidden) {
                totalBalance.textContent = '****';
            } else {
                totalBalance.textContent = total.toFixed(2);
            }
        }

        function toggleBalanceVisibility() {
            balanceHidden = !balanceHidden;
            
            if (balanceHidden) {
                balanceToggle.innerHTML = '<i class="fas fa-eye-slash"></i>';
                totalBalance.textContent = '****';
                
                // Hide token balances
                document.querySelectorAll('.token-amount, .token-value').forEach(el => {
                    el.textContent = '****';
                });
            } else {
                balanceToggle.innerHTML = '<i class="fas fa-eye"></i>';
                updateTotalBalance();
                loadWalletData(); // Reload to show actual balances
            }
        }

        function formatBalance(value) {
            if (balanceHidden) return '****';
            return parseFloat(value).toFixed(4);
        }

        function getTokenColor(token) {
            const colors = {
                bnb: '#f0b90b',
                cake: '#d1884f',
                busd: '#f0b90b',
                safe: '#ff6b6b'
            };
            return colors[token] || '#f8b500';
        }

        async function handleSend() {
            const recipient = document.getElementById('recipient').value;
            const token = document.getElementById('tokenSelect').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const sendStatus = document.getElementById('sendStatus');
            
            if (!recipient || !amount || amount <= 0) {
                showStatus(sendStatus, 'Please fill in all fields correctly', 'error');
                return;
            }
            
            if (amount > userWallet.tokens[token].balance) {
                showStatus(sendStatus, 'Insufficient balance', 'error');
                return;
            }
            
            // Simulate transaction
            showStatus(sendStatus, 'Processing transaction...', 'success');
            
            // In a real implementation, this would use web3 to send the transaction
            setTimeout(async () => {
                // Update balances
                userWallet.tokens[token].balance -= amount;
                userWallet.tokens[token].value = userWallet.tokens[token].balance * tokenPrices[token];
                
                // Add to transaction history
                userWallet.transactions.unshift({
                    type: 'sent',
                    token: token,
                    amount: amount,
                    address: recipient.substring(0, 10) + '...' + recipient.substring(recipient.length - 8),
                    timestamp: new Date().toISOString()
                });
                
                // Save to database
                await updateUserData(userWallet);
                
                // Update UI
                loadWalletData();
                
                showStatus(sendStatus, 'Transaction sent successfully!', 'success');
                
                setTimeout(() => {
                    sendModal.style.display = 'none';
                    sendStatus.style.display = 'none';
                    document.getElementById('recipient').value = '';
                    document.getElementById('amount').value = '';
                }, 2000);
            }, 2000);
        }

        async function handleBuy() {
            const token = document.getElementById('buyToken').value;
            const amountUSD = parseFloat(document.getElementById('buyAmount').value);
            const buyStatus = document.getElementById('buyStatus');
            
            if (!amountUSD || amountUSD <= 0) {
                showStatus(buyStatus, 'Please enter a valid amount', 'error');
                return;
            }
            
            // Calculate fees and tokens
            const fee = amountUSD * 0.008; // 0.8% fee
            const totalCost = amountUSD + fee;
            const tokensReceived = (amountUSD - fee) / tokenPrices[token];
            
            // Simulate buy
            showStatus(buyStatus, 'Processing purchase...', 'success');
            
            setTimeout(async () => {
                // Update balances
                if (!userWallet.tokens[token]) {
                    userWallet.tokens[token] = { balance: 0, value: 0 };
                }
                
                userWallet.tokens[token].balance += tokensReceived;
                userWallet.tokens[token].value = userWallet.tokens[token].balance * tokenPrices[token];
                
                // Add to transaction history
                userWallet.transactions.unshift({
                    type: 'buy',
                    token: token,
                    amount: tokensReceived,
                    usdAmount: amountUSD,
                    fee: fee,
                    timestamp: new Date().toISOString()
                });
                
                // Save to database
                await updateUserData(userWallet);
                
                // Update UI
                loadWalletData();
                
                showStatus(buyStatus, `Purchase successful! Received ${tokensReceived.toFixed(4)} ${token.toUpperCase()}`, 'success');
                
                setTimeout(() => {
                    buyModal.style.display = 'none';
                    buyStatus.style.display = 'none';
                    document.getElementById('buyAmount').value = '';
                }, 2000);
            }, 2000);
        }

        async function handleSell() {
            const token = document.getElementById('sellToken').value;
            const amount = parseFloat(document.getElementById('sellAmount').value);
            const sellStatus = document.getElementById('sellStatus');
            
            if (!amount || amount <= 0) {
                showStatus(sellStatus, 'Please enter a valid amount', 'error');
                return;
            }
            
            if (amount > userWallet.tokens[token].balance) {
                showStatus(sellStatus, 'Insufficient balance', 'error');
                return;
            }
            
            // Calculate fees and USD received
            const tokenValue = amount * tokenPrices[token];
            const fee = tokenValue * 0.09; // 9% fee
            const usdReceived = tokenValue - fee;
            
            // Simulate sell
            showStatus(sellStatus, 'Processing sale...', 'success');
            
            setTimeout(async () => {
                // Update balances
                userWallet.tokens[token].balance -= amount;
                userWallet.tokens[token].value = userWallet.tokens[token].balance * tokenPrices[token];
                
                // Add to transaction history
                userWallet.transactions.unshift({
                    type: 'sell',
                    token: token,
                    amount: amount,
                    usdAmount: usdReceived,
                    fee: fee,
                    timestamp: new Date().toISOString()
                });
                
                // Save to database
                await updateUserData(userWallet);
                
                // Update UI
                loadWalletData();
                
                showStatus(sellStatus, `Sale successful! Received $${usdReceived.toFixed(2)}`, 'success');
                
                setTimeout(() => {
                    sellModal.style.display = 'none';
                    sellStatus.style.display = 'none';
                    document.getElementById('sellAmount').value = '';
                }, 2000);
            }, 2000);
        }

        function updateBuyDetails() {
            const token = document.getElementById('buyToken').value;
            const amountUSD = parseFloat(document.getElementById('buyAmount').value) || 0;
            const fee = amountUSD * 0.008; // 0.8% fee
            const totalCost = amountUSD + fee;
            const tokensReceived = (amountUSD - fee) / tokenPrices[token];
            
            document.getElementById('buyAmountDisplay').textContent = amountUSD.toFixed(2);
            document.getElementById('buyFee').textContent = fee.toFixed(2);
            document.getElementById('buyTotal').textContent = totalCost.toFixed(2);
            document.getElementById('buyTokens').textContent = tokensReceived.toFixed(4);
            document.getElementById('buyTokenSymbol').textContent = token.toUpperCase();
        }

        function updateSellDetails() {
            const token = document.getElementById('sellToken').value;
            const amount = parseFloat(document.getElementById('sellAmount').value) || 0;
            const tokenValue = amount * tokenPrices[token];
            const fee = tokenValue * 0.09; // 9% fee
            const usdReceived = tokenValue - fee;
            
            document.getElementById('sellAmountDisplay').textContent = amount.toFixed(4);
            document.getElementById('sellTokenSymbol').textContent = token.toUpperCase();
            document.getElementById('sellFee').textContent = fee.toFixed(2);
            document.getElementById('sellFeeSymbol').textContent = token.toUpperCase();
            document.getElementById('sellTotal').textContent = usdReceived.toFixed(2);
        }

        function fetchTokenDetails() {
            const contractAddress = document.getElementById('tokenContract').value;
            const addTokenStatus = document.getElementById('addTokenStatus');
            
            if (!contractAddress) {
                showStatus(addTokenStatus, 'Please enter a contract address', 'error');
                return;
            }
            
            // In a real implementation, this would fetch token details from the blockchain
            // For demo purposes, we'll simulate fetching token details
            showStatus(addTokenStatus, 'Fetching token details...', 'success');
            
            setTimeout(() => {
                // Simulate different token responses based on contract address
                let name, symbol, decimals;
                
                if (contractAddress.toLowerCase().includes('safe')) {
                    name = 'SupremeAmer';
                    symbol = 'SAFE';
                    decimals = 18;
                } else if (contractAddress.toLowerCase().includes('cake')) {
                    name = 'PancakeSwap';
                    symbol = 'CAKE';
                    decimals = 18;
                } else if (contractAddress.toLowerCase().includes('busd')) {
                    name = 'Binance USD';
                    symbol = 'BUSD';
                    decimals = 18;
                } else {
                    // Generic token
                    name = 'Custom Token';
                    symbol = 'CUSTOM';
                    decimals = 18;
                }
                
                document.getElementById('tokenName').value = name;
                document.getElementById('tokenSymbol').value = symbol;
                document.getElementById('tokenDecimals').value = decimals;
                
                showStatus(addTokenStatus, 'Token details fetched successfully!', 'success');
            }, 1500);
        }

        async function handleAddToken() {
            const contract = document.getElementById('tokenContract').value;
            const name = document.getElementById('tokenName').value;
            const symbol = document.getElementById('tokenSymbol').value;
            const decimals = document.getElementById('tokenDecimals').value;
            const addTokenStatus = document.getElementById('addTokenStatus');
            
            if (!contract || !name || !symbol || !decimals) {
                showStatus(addTokenStatus, 'Please fill in all fields', 'error');
                return;
            }
            
            // Add token to wallet
            const tokenKey = symbol.toLowerCase();
            userWallet.tokens[tokenKey] = {
                balance: 0,
                value: 0,
                name: name,
                symbol: symbol,
                decimals: decimals,
                contract: contract
            };
            
            // Save to database
            await updateUserData(userWallet);
            
            showStatus(addTokenStatus, 'Token added successfully!', 'success');
            
            setTimeout(() => {
                addTokenModal.style.display = 'none';
                addTokenStatus.style.display = 'none';
                document.getElementById('tokenContract').value = '';
                document.getElementById('tokenName').value = '';
                document.getElementById('tokenSymbol').value = '';
                document.getElementById('tokenDecimals').value = '18';
                
                // Reload wallet data to show new token
                loadWalletData();
            }, 1500);
        }

        // Mining Functions
        function updateMining() {
            if (!miningActive) return;
            
            const now = Math.floor(Date.now() / 1000);
            const elapsed = now - miningStartTime;
            
            if (elapsed >= sessionDuration) {
                // Session completed
                stopMining();
                showNotification("Mining session completed!", "success");
                return;
            }
            
            // Calculate coins earned
            const coinsEarned = miningSpeed * miningMultiplier;
            minedCoins += coinsEarned;
            
            // Update user wallet
            userWallet.mining.minedCoins = minedCoins;
            updateUserData(userWallet);
            
            // Update UI
            updateMiningUI();
        }

        async function toggleMining() {
            if (miningActive) {
                stopMining();
                showNotification("Mining stopped", "info");
            } else {
                await startMining();
            }
        }

        async function startMining() {
            if (miningActive) return;
            
            miningActive = true;
            miningStartTime = Math.floor(Date.now() / 1000);
            
            // Update user wallet
            userWallet.mining.miningActive = true;
            userWallet.mining.miningStartTime = miningStartTime;
            await updateUserData(userWallet);
            
            // Update UI
            mineBtn.querySelector('i').className = 'fas fa-cog fa-spin';
            mineBtn.querySelector('span').textContent = 'Mining...';
            sessionStatus.textContent = 'Mining in progress...';
            
            // Start interval
            miningInterval = setInterval(updateMining, 1000);
            
            showNotification("Mining session started!", "success");
        }

        async function stopMining() {
            miningActive = false;
            
            // Update user wallet
            userWallet.mining.miningActive = false;
            await updateUserData(userWallet);
            
            // Update UI
            mineBtn.querySelector('i').className = 'fas fa-play';
            mineBtn.querySelector('span').textContent = 'Start Mining';
            sessionStatus.textContent = 'Ready to start mining';
            
            // Clear interval
            clearInterval(miningInterval);
        }

        async function resumeMining() {
            if (!miningActive) return;
            
            const now = Math.floor(Date.now() / 1000);
            const elapsed = now - miningStartTime;
            
            if (elapsed >= sessionDuration) {
                // Session completed while away
                stopMining();
                showNotification("Mining session completed!", "success");
                return;
            }
            
            // Calculate offline earnings
            const offlineTime = now - parseInt(localStorage.getItem('lastUpdateTime') || miningStartTime);
            const offlineCoins = miningSpeed * miningMultiplier * offlineTime;
            minedCoins += offlineCoins;
            
            // Update user wallet
            userWallet.mining.minedCoins = minedCoins;
            await updateUserData(userWallet);
            
            // Update UI
            mineBtn.querySelector('i').className = 'fas fa-cog fa-spin';
            mineBtn.querySelector('span').textContent = 'Mining...';
            sessionStatus.textContent = 'Mining in progress...';
            
            if (offlineTime > 0) {
                showNotification(`Earned ${offlineCoins.toFixed(4)} SA while offline!`, "success");
            }
            
            // Start interval
            miningInterval = setInterval(updateMining, 1000);
        }

        function updateMiningUI() {
            // Update mined coins
            minedCoinsElement.textContent = `${minedCoins.toFixed(4)} SA`;
            
            // Update timer and progress
            if (miningActive) {
                const now = Math.floor(Date.now() / 1000);
                const elapsed = now - miningStartTime;
                const remaining = Math.max(sessionDuration - elapsed, 0);
                
                // Format time
                const hours = Math.floor(remaining / 3600);
                const minutes = Math.floor((remaining % 3600) / 60);
                const seconds = remaining % 60;
                
                miningTimer.textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // Update progress
                const progress = (elapsed / sessionDuration) * 100;
                miningProgress.style.width = `${progress}%`;
                sessionProgress.textContent = `${Math.round(progress)}%`;
                
                // Update session time
                const elapsedHours = Math.floor(elapsed / 3600);
                const elapsedMinutes = Math.floor((elapsed % 3600) / 60);
                const elapsedSeconds = elapsed % 60;
                
                sessionTime.textContent = 
                    `Session: ${elapsedHours.toString().padStart(2, '0')}:${elapsedMinutes.toString().padStart(2, '0')}:${elapsedSeconds.toString().padStart(2, '0')} / 07:00:00`;
                
                // Save last update time
                localStorage.setItem('lastUpdateTime', now.toString());
            }
            
            // Update mining rate
            miningRate.textContent = (miningSpeed * miningMultiplier).toFixed(4);
            
            // Update multiplier
            multiplier.textContent = `${miningMultiplier}x`;
            
            // Update claim status
            updateClaimStatus();
        }

        function updateClaimStatus() {
            if (upgradeActive) {
                const now = Math.floor(Date.now() / 1000);
                const upgradeEndTime = miningUpgrade.startTime + UPGRADE_DURATION;
                const timeLeft = upgradeEndTime - now;
                const nextClaim = miningUpgrade.lastClaim + CLAIM_INTERVAL;
                const canClaim = now >= nextClaim;
                
                if (timeLeft > 0) {
                    const daysLeft = Math.floor(timeLeft / (24 * 3600));
                    const hoursLeft = Math.floor((timeLeft % (24 * 3600)) / 3600);
                    
                    claimStatus.innerHTML = `Upgrade: <b>${miningUpgrade.upgradeSpeed} SA/sec</b>, ${daysLeft}d ${hoursLeft}h left<br>
                    Next claim: <b>${new Date(nextClaim * 1000).toLocaleDateString()}</b> ${canClaim ? '<span style="color:#00ffb3;">Ready!</span>' : ''}`;
                } else {
                    // Upgrade expired
                    upgradeActive = false;
                    miningUpgrade = null;
                    miningSpeed = NORMAL_SPEED;
                    
                    // Update user wallet
                    userWallet.mining.upgradeActive = false;
                    userWallet.mining.miningUpgrade = null;
                    userWallet.mining.miningSpeed = miningSpeed;
                    updateUserData(userWallet);
                    
                    claimStatus.innerHTML = "";
                    showNotification("Your mining upgrade has expired", "info");
                }
            } else {
                claimStatus.innerHTML = "";
            }
        }

        async function handleWithdraw() {
            const today = new Date();
            
            // Check if today is a withdrawal day
            if (!WITHDRAW_DAYS.includes(today.getDate())) {
                withdrawStatus.textContent = `Withdrawals only on ${WITHDRAW_DAYS.join('th and ')}th each month!`;
                withdrawStatus.classList.add('error-message');
                return;
            }
            
            if (minedCoins < WITHDRAW_MIN_SA) {
                withdrawStatus.textContent = `Need at least ${WITHDRAW_MIN_SA} SA to withdraw.`;
                withdrawStatus.classList.add('error-message');
                return;
            }
            
            // Clear status
            withdrawStatus.textContent = "";
            withdrawStatus.classList.remove('error-message');
            
            // Simulate withdrawal processing
            withdrawStatus.textContent = "Processing withdrawal...";
            showNotification("Processing withdrawal transaction...", "info");
            
            setTimeout(async () => {
                // Calculate withdrawal with fee
                const feeAmount = minedCoins * (WITHDRAW_FEE_PERCENT / 100);
                const sendAmount = minedCoins - feeAmount;
                
                // Add SAFE tokens to wallet
                if (!userWallet.tokens.safe) {
                    userWallet.tokens.safe = { balance: 0, value: 0 };
                }
                userWallet.tokens.safe.balance += sendAmount;
                userWallet.tokens.safe.value = userWallet.tokens.safe.balance * tokenPrices.safe;
                
                // Reset mined coins
                minedCoins = 0;
                userWallet.mining.minedCoins = 0;
                
                // Add to transaction history
                userWallet.transactions.unshift({
                    type: 'received',
                    token: 'safe',
                    amount: sendAmount,
                    address: 'Mining Reward',
                    timestamp: new Date().toISOString()
                });
                
                // Save to database
                await updateUserData(userWallet);
                
                // Update UI
                updateMiningUI();
                loadWalletData();
                withdrawStatus.textContent = "";
                
                // Show success
                createConfetti();
                showNotification(`Withdrawal successful! ${sendAmount.toFixed(2)} SA sent to your wallet.`, "success");
            }, 3000);
        }

        async function handleClaim() {
            if (upgradeActive && miningUpgrade) {
                const now = Math.floor(Date.now() / 1000);
                const nextClaim = miningUpgrade.lastClaim + CLAIM_INTERVAL;
                
                if (now >= nextClaim) {
                    // Calculate claimable amount
                    const seconds = now - miningUpgrade.lastClaim;
                    const claimAmount = seconds * miningUpgrade.upgradeSpeed;
                    
                    // Add to mined coins
                    minedCoins += claimAmount;
                    miningUpgrade.lastClaim = now;
                    
                    // Update user wallet
                    userWallet.mining.minedCoins = minedCoins;
                    userWallet.mining.miningUpgrade = miningUpgrade;
                    await updateUserData(userWallet);
                    
                    updateMiningUI();
                    createConfetti();
                    showNotification(`You claimed ${claimAmount.toFixed(4)} SA!`, "success");
                } else {
                    const timeLeft = nextClaim - now;
                    const days = Math.floor(timeLeft / (24 * 3600));
                    const hours = Math.floor((timeLeft % (24 * 3600)) / 3600);
                    
                    showNotification(`Next claim available in ${days}d ${hours}h`, "info");
                }
            }
        }

        async function upgradeMining(speedKey) {
            miningUpgradeModal.style.display = 'none';
            
            if (upgradeActive) {
                showNotification("You already have an active upgrade!", "error");
                return;
            }
            
            const upgrade = {
                speed: UPGRADE_SPEEDS[speedKey],
                cost: UPGRADE_FEES[speedKey]
            };
            
            miningSpeed = upgrade.speed;
            
            // Set upgrade data
            miningUpgrade = {
                upgradeSpeed: upgrade.speed,
                bnbFee: upgrade.cost,
                startTime: Math.floor(Date.now() / 1000),
                lastClaim: Math.floor(Date.now() / 1000)
            };
            
            upgradeActive = true;
            
            // Update user wallet
            userWallet.mining.miningSpeed = miningSpeed;
            userWallet.mining.miningUpgrade = miningUpgrade;
            userWallet.mining.upgradeActive = true;
            await updateUserData(userWallet);
            
            showNotification(`Mining upgraded to ${upgrade.speed} SA/sec!`, "success");
            createConfetti();
            updateMiningUI();
        }

        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            const colors = ['#ff9800', '#fdc500', '#ff3333', '#4CAF50', '#2196F3'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                
                // Random position
                confetti.style.left = `${Math.random() * 100}vw`;
                
                // Random size
                const size = Math.random() * 10 + 5;
                confetti.style.width = `${size}px`;
                confetti.style.height = `${size}px`;
                
                // Random shape
                if (Math.random() > 0.5) {
                    confetti.style.borderRadius = '50%';
                } else {
                    confetti.style.borderRadius = '0';
                }
                
                // Random color
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                
                // Random animation duration
                const duration = Math.random() * 3 + 2;
                confetti.style.animationDuration = `${duration}s`;
                
                container.appendChild(confetti);
                
                // Remove after animation
                setTimeout(() => {
                    confetti.remove();
                }, duration * 1000);
            }
        }

        function sendChatMessage() {
            const message = chatInput.value.trim();
            if (message) {
                // Add user message
                const userMessage = document.createElement('div');
                userMessage.className = 'message user';
                userMessage.textContent = message;
                chatMessages.appendChild(userMessage);
                
                // Clear input
                chatInput.value = '';
                
                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // Simulate bot response after a delay
                setTimeout(() => {
                    const botMessage = document.createElement('div');
                    botMessage.className = 'message bot';
                    botMessage.textContent = getBotResponse(message);
                    chatMessages.appendChild(botMessage);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000);
            }
        }

        function getBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('fee') || lowerMessage.includes('gas')) {
                return "Gas fees on BNB Chain are typically very low, around $0.10-$0.30 per transaction. Buy fees are 0.8% and sell fees are 9%.";
            } else if (lowerMessage.includes('buy') || lowerMessage.includes('purchase')) {
                return "You can buy tokens directly in the wallet. Just click the 'Buy' button and select the token you want to purchase.";
            } else if (lowerMessage.includes('sell') || lowerMessage.includes('sale')) {
                return "You can sell your tokens by clicking the 'Sell' button. Note that there's a 9% fee on all sales.";
            } else if (lowerMessage.includes('security') || lowerMessage.includes('safe')) {
                return "Your private keys are encrypted and stored securely on our servers. We use industry-standard encryption to protect your assets.";
            } else if (lowerMessage.includes('import') || lowerMessage.includes('add token')) {
                return "You can add custom tokens by clicking the 'Add Token' button and entering the contract address.";
            } else if (lowerMessage.includes('mining')) {
                return "You can start mining SAFE tokens in the mining section. Just click the 'Start Mining' button to begin.";
            } else {
                return "Thanks for your message! How else can I help you with your SupremeAmer wallet?";
            }
        }

        function showStatus(element, message, type) {
            element.textContent = message;
            element.className = `status-message status-${type}`;
            element.style.display = 'block';
            
            if (type === 'success') {
                setTimeout(() => {
                    element.style.display = 'none';
                }, 5000);
            }
        }

        function showNotification(message, type = 'info', duration = 3000) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `status-message status-${type}`;
            notification.textContent = message;
            notification.style.position = 'fixed';
            notification.style.top = '20px';
            notification.style.right = '20px';
            notification.style.zIndex = '9999';
            notification.style.maxWidth = '300px';
            
            document.body.appendChild(notification);
            
            // Remove after duration
            setTimeout(() => {
                notification.remove();
            }, duration);
        }

        // Close modals when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === sendModal) {
                sendModal.style.display = 'none';
            }
            if (e.target === receiveModal) {
                receiveModal.style.display = 'none';
            }
            if (e.target === buyModal) {
                buyModal.style.display = 'none';
            }
            if (e.target === sellModal) {
                sellModal.style.display = 'none';
            }
            if (e.target === addTokenModal) {
                addTokenModal.style.display = 'none';
            }
            if (e.target === miningUpgradeModal) {
                miningUpgradeModal.style.display = 'none';
            }
        });

        // Initialize
        updateBuyDetails();
        updateSellDetails();
        
        // Check if user is already logged in
        (async function checkExistingSession() {
            try {
                const user = await account.get();
                if (user) {
                    const userData = await getUserData();
                    if (userData) {
                        currentUser = user.email;
                        userWallet = userData.wallet;
                        isLoggedIn = true;
                        
                        // Load mining data
                        if (userWallet.mining) {
                            minedCoins = userWallet.mining.minedCoins;
                            miningActive = userWallet.mining.miningActive;
                            miningStartTime = userWallet.mining.miningStartTime;
                            miningSpeed = userWallet.mining.miningSpeed;
                            miningMultiplier = userWallet.mining.miningMultiplier;
                            miningUpgrade = userWallet.mining.miningUpgrade;
                            upgradeActive = userWallet.mining.upgradeActive;
                        }
                        
                        authSection.classList.add('hidden');
                        walletDashboard.classList.remove('hidden');
                        loadWalletData();
                        updateMiningUI();
                        
                        // Resume mining if active
                        if (miningActive) {
                            resumeMining();
                        }
                    }
                }
            } catch (error) {
                // No existing session, user needs to log in
                console.log('No existing session found');
            }
        })();
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SupremeAmer Word Connect Game</title>
  <meta name="viewport" content="width=370, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;400&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Montserrat', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(135deg, #111 70%, #ff9800 100%);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    .header {
      width: 100%;
      padding: 25px 0 10px 0;
      text-align: center;
      background: rgba(0,0,0,0.7);
      font-size: 2.4em;
      font-weight: bold;
      letter-spacing: 2px;
      box-shadow: 0 2px 16px #ffeb3b33;
    }
    .container {
      background: rgba(30, 30, 40, 0.95);
      padding: 36px 22px 28px 22px;
      border-radius: 20px;
      box-shadow: 0 8px 32px #0006;
      text-align: center;
      max-width: 400px;
      width: 96%;
      margin: 20px 0 90px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #game-title {
      font-size: 1.5em;
      color: #fdc500;
      margin-bottom: 6px;
    }
    #mining-balance {
      background: #222;
      color: #ffb900;
      font-size: 1.3em;
      border-radius: 8px;
      padding: 8px 18px;
      font-weight: bold;
      margin-bottom: 12px;
      letter-spacing: 1px;
      box-shadow: 0 1px 6px #ffb90044;
    }
    #level {
      color: #fdc500;
      font-weight: 700;
      font-size: 1.1em;
      margin-bottom: 10px;
      letter-spacing: 1px;
    }
    #reward-msg {
      min-height: 24px;
      font-size: 1.1em;
      color: #2ecc71;
      font-weight: bold;
      margin-bottom: 8px;
      transition: color .2s;
    }
    #grid {
      display: flex;
      justify-content: center;
      gap: 6px;
      margin: 18px 0 14px 0;
    }
    .cell {
      width: 38px; height: 38px;
      display: flex; align-items: center; justify-content: center;
      background: #333;
      border: 2px solid #fdc500;
      border-radius: 8px;
      margin: 2px;
      font-size: 26px;
      font-weight: bold;
      color: #fff;
      transition: background .2s, border .2s;
    }
    #selector {
      display: flex; justify-content: center; gap: 10px; flex-wrap: wrap;
      margin: 0 0 14px 0;
      min-height: 54px;
    }
    .letter {
      width: 48px; height: 48px;
      background: #fdc500;
      border: 2px solid #ff9800;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 22px; font-weight: 700;
      margin: 2px; cursor: pointer;
      transition: background .12s, transform .12s;
      user-select: none;
      box-shadow: 0 1px 6px #fdc50033;
      color: #222;
    }
    .letter.selected {
      background: #ff9800;
      transform: scale(0.94);
      opacity: 0.7;
      color: #fff;
    }
    #input-word {
      font-size: 26px;
      letter-spacing: 3px;
      margin-bottom: 8px;
      min-height: 30px;
      font-weight: bold;
      color: #fff;
      text-align: center;
    }
    #footer-buttons {
      display: flex; justify-content: center; flex-wrap: wrap;
      width: 100%; margin: 0 0 10px 0; gap: 10px;
    }
    .main-btn {
      background: linear-gradient(90deg, #fdc500 40%, #ff9800 100%);
      color: #111;
      border: none;
      border-radius: 8px;
      font-size: 1.12em;
      padding: 13px 20px;
      cursor: pointer;
      font-weight: bold;
      transition: box-shadow 0.2s, background 0.18s;
      box-shadow: 0 2px 8px #ff980066;
      margin: 0 2px;
      min-width: 102px;
    }
    .main-btn:hover {
      background: linear-gradient(90deg, #ff9800 40%, #fdc500 100%);
      color: #fff;
      box-shadow: 0 4px 16px #ff980099;
    }
    #history-list {
      margin-top: 18px;
      width: 100%;
      max-width: 320px;
      min-height: 30px;
      text-align: left;
      font-size: 15px;
      color: #fff;
    }
    .history-item {
      background: #232323;
      border-radius: 7px;
      margin-bottom: 8px;
      padding: 8px 12px;
      color: #fdc500;
      font-weight: bold;
    }
    .footer {
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 28px;
      padding: 18px 0;
      background: rgba(255, 184, 0, 0.09);
      position: fixed;
      bottom: 0; left: 0;
      border-radius: 18px 18px 0 0;
      box-shadow: 0 -4px 24px #ff980022;
      z-index: 999;
    }
    .footer button {
      background: #fff;
      color: #ff9800;
      border: none;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 2em;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px #2222;
      transition: background 0.2s, color 0.2s;
    }
    .footer button:hover {
      background: #ff9800;
      color: #fff;
    }
    @media (max-width: 600px) {
      .container { padding: 18px 3px;}
      .header { font-size: 1.3em; }
      .footer button { width: 44px; height: 44px; font-size: 1.3em;}
      .main-btn { padding: 12px 12px; font-size: 1em; min-width: 88px;}
    }
  </style>
</head>
<body>
  <div class="header">SUPREMEAMER GAME üéÆ</div>
  <div class="container">
    <div id="game-title">Word Connect Game</div>
    <div id="mining-balance">Mined Coins: <span id="mining-balance-value">0</span></div>
    <div id="level"></div>
    <div id="reward-msg"></div>
    <div id="grid"></div>
    <div id="input-word"></div>
    <div id="selector"></div>
    <div id="footer-buttons">
      <button class="main-btn" id="submit-btn">SUBMIT</button>
      <button class="main-btn" id="history-btn">History</button>
      <button class="main-btn" id="restart-btn">Restart</button>
    </div>
    <div id="history-list" style="display:none;"></div>
  </div>
  <div class="footer">
    <button onclick="window.location.href='index.html'" title="Home">üè†</button>
    <button onclick="window.location.href='Task.html'" title="Tasks">üìú</button>
    <button onclick="window.location.href='wallet.html'" title="Wallet">üí∏</button>
    <button onclick="window.location.href='dapp.html'" title="DApp">üéÆ</button>
  </div>
<script src="https://cdn.jsdelivr.net/npm/ethers@5/dist/ethers.umd.min.js"></script>
<script>
// --- CONFIGURATION ---
const OWNER_ETH_ADDRESS = '0xYourEthereumAddressHere'; // <<<<--- PUT YOUR ETH ADDRESS HERE

// --- WORD DATA ---
const WORDS = [
  "nft","hide","defi","veil","skin","skrill","stock","mining","website","bitcoin",
  "secret","furtive","covert","latent","conceal","hideout","forex","stocks","secrete","stash",
  "hider","hideling","hidden","exposed","anonymous","pseudonym","incognito","mask","pokerface","cloak",
  "services","products","software","research","comments","national","internetshipping",
  "reserved","security","american","computer","download","pictures","personal","location",
  "children","students","shopping","previous","property","customer","december","training",
  "advanced","category","register","november","features","industry","provided","required",
  "articles","feedback","complete","standard","programs","language","password","question",
  "building","february","analysis","possible","problems","interest","learning","delivery",
  "original","includes","messages","provides","specific","director","planning","database",
  "official","district","calendar","resource","document","material","together","function",
  "economic","projects","included","received","archives","magazine","policies","position",
  "listings","wireless","purchase","response","practice","hardware","designed","discount",
  "remember","increase","european","activity","although","contents","regional","supplies",
  "exchange","continue","benefits","anything","mortgage","solution","addition","clothing",
  "military","decision","division"
];

// --- GAME STATE ---
let gameState = {
  level: 0,
  mining: 0,
  foundLevels: [],
  history: []
};
const LS_KEY = "supremeamer_wordgame";

// --- UTILITIES FOR COIN CREDIT TO INDEX.HTML ---
function getMainMinedCoins() {
  let coins = parseFloat(localStorage.getItem('minedCoins'));
  return isNaN(coins) ? 0 : coins;
}
function setMainMinedCoins(amount) {
  localStorage.setItem('minedCoins', amount);
  window.dispatchEvent(new Event('minedCoins_update'));
}

// --- SAVE/LOAD GAME ---
function saveGame() {
  localStorage.setItem(LS_KEY, JSON.stringify(gameState));
  // Sync mining balance to global minedCoins (index.html)
  let totalMined = getMainMinedCoins();
  // Only add newly mined coins
  let newBalance = Math.max(totalMined, 0) + gameState.mining;
  setMainMinedCoins(newBalance);
  // For display in game
  document.getElementById("mining-balance-value").textContent = newBalance.toLocaleString(undefined, {minimumFractionDigits: 4, maximumFractionDigits: 4});
}
function loadGame() {
  const data = localStorage.getItem(LS_KEY);
  if (data) {
    try {
      const obj = JSON.parse(data);
      if (typeof obj === "object") {
        gameState = {...gameState, ...obj};
      }
    } catch {}
  }
}
function resetGame() {
  gameState = {
    level: 0,
    mining: 0,
    foundLevels: [],
    history: []
  };
  saveGame();
  renderGame();
}

// --- REWARD RULES ---
function getLevelReward(level) {
  // Level is zero-based index; level+1 is user-facing level
  return 30 * (level + 1);
}

// --- GAME LOGIC + UI ---
function renderGame() {
  document.getElementById("history-list").style.display = "none";
  // Display minedCoins global balance
  let mainCoins = getMainMinedCoins();
  document.getElementById("mining-balance-value").textContent = mainCoins.toLocaleString(undefined, {minimumFractionDigits: 4, maximumFractionDigits: 4});
  const word = WORDS[gameState.level];
  if (!word) {
    document.getElementById("level").innerHTML = `<span style="color:#fdc500;font-size:1.3em;">Congratulations!<br/>You finished all levels!</span>`;
    document.getElementById("reward-msg").textContent = "";
    document.getElementById("grid").innerHTML = "";
    document.getElementById("selector").innerHTML = "";
    document.getElementById("input-word").innerText = "";
    document.getElementById("submit-btn").disabled = true;
    return;
  }
  document.getElementById("submit-btn").disabled = false;
  document.getElementById("level").innerHTML = `LEVEL ${gameState.level + 1}`;
  document.getElementById("reward-msg").textContent = "";
  // Render grid
  const gridDiv = document.getElementById("grid");
  gridDiv.innerHTML = "";
  const grid = Array.from(word.replace(/ /g, '').toUpperCase());
  for (let i = 0; i < grid.length; i++) {
    const cell = document.createElement("div");
    cell.className = "cell";
    cell.innerText = "";
    gridDiv.appendChild(cell);
  }
  // Render selector
  const selectorDiv = document.getElementById("selector");
  selectorDiv.innerHTML = "";
  const letters = shuffle(Array.from(word.replace(/ /g, '').toUpperCase()));
  let input = "";
  letters.forEach((letter, idx) => {
    const div = document.createElement("div");
    div.className = "letter";
    div.innerText = letter;
    div.onclick = () => {
      if (!div.classList.contains("selected")) {
        div.classList.add("selected");
        input += letter;
        document.getElementById("input-word").innerText = input;
      }
    };
    selectorDiv.appendChild(div);
  });
  document.getElementById("input-word").innerText = "";
  // Submit logic
  document.getElementById("submit-btn").onclick = () => {
    if (input.replace(/ /g, '').toLowerCase() === word.replace(/ /g, '').toLowerCase()) {
      const reward = getLevelReward(gameState.level);
      gameState.mining += reward;
      gameState.foundLevels.push(gameState.level);
      gameState.level += 1;
      gameState.history.push({
        type: "level-up",
        level: gameState.level,
        amount: reward,
        timestamp: Date.now()
      });
      saveGame();
      document.getElementById("reward-msg").style.color = "#2ecc71";
      document.getElementById("reward-msg").innerText = `Correct! +${reward} coins`;
      setTimeout(renderGame, 1100);
    } else {
      document.getElementById("reward-msg").style.color = "#e74c3c";
      document.getElementById("reward-msg").innerText = "Try again!";
      document.getElementById("input-word").innerText = "";
      input = "";
      document.querySelectorAll(".letter").forEach(x => x.classList.remove("selected"));
    }
  };
}

// --- HISTORY ---
function showHistory() {
  const list = document.getElementById("history-list");
  list.innerHTML = "";
  if (!gameState.history.length) {
    list.innerHTML = "<div>No transactions yet.</div>";
  } else {
    gameState.history.slice().reverse().forEach(tx => {
      const date = new Date(tx.timestamp).toLocaleString();
      if (tx.type === "level-up") {
        list.innerHTML += `<div class="history-item">[${date}] Level ${tx.level} cleared - Rewarded <b>${tx.amount} coins</b></div>`;
      }
    });
  }
  list.style.display = "block";
}

// --- BUTTON EVENTS ---
document.getElementById("history-btn").onclick = function() {
  showHistory();
};
document.getElementById("restart-btn").onclick = function() {
  if (confirm("Restart the game? All progress will be lost!")) {
    resetGame();
  }
};

// --- UTILITY ---
function shuffle(array) {
  let a = array.slice();
  for (let i = a.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}
function showMsg(msg, color) {
  document.getElementById("reward-msg").style.color = color;
  document.getElementById("reward-msg").innerText = msg;
}

// --- INIT ---
window.onload = function() {
  loadGame();
  renderGame();
  // Listen for mining balance updates (if index.html changes it)
  window.addEventListener("minedCoins_update", function() {
    document.getElementById("mining-balance-value").textContent = getMainMinedCoins().toLocaleString(undefined, {minimumFractionDigits: 4, maximumFractionDigits: 4});
  });
};

</script>
</body>
</html>
